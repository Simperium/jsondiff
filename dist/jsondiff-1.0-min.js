(function(){var b;var a=Object.prototype.hasOwnProperty;b=(function(){function c(){}c.dmp=new diff_match_patch();c.prototype.entries=function(f){var d,g,e;g=0;for(d in f){if(!a.call(f,d)){continue}e=f[d];g++}return g};c.prototype.typeOf=function(e){var d;d=typeof e;if(d==="object"){if(e){if(typeof e.length==="number"&&typeof e.splice==="function"&&!e.propertyIsEnumerable("length")){d="array"}}else{d="null"}}return d};c.prototype.deepCopy=function(g){var e,d,f;if(Object.prototype.toString.call(g)==="[object Array]"){d=[];for(e=0,f=g.length;0<=f?e<f:e>f;0<=f?e++:e--){d[e]=arguments.callee(g[e])}return d}if(typeof g==="object"){d={};for(e in g){d[e]=arguments.callee(g[e])}return d}return g};c.prototype.equals=function(f,e){var d;d=this.typeOf(f);if(d!==this.typeOf(e)){return false}if(d==="array"){return this.list_equals(f,e)}else{if(d==="object"){return this.object_equals(f,e)}else{return f===e}}};c.prototype.list_equals=function(e,d){var g,f;g=e.length;if(g!==d.length){return false}for(f=0;0<=g?f<g:f>g;0<=g?f++:f--){if(!this.equals(e[f],d[f])){return false}}return true};c.prototype.object_equals=function(e,d){var f;for(f in e){if(!a.call(e,f)){continue}if(!(f in d)){return false}if(!this.equals(e[f],d[f])){return false}}for(f in d){if(!a.call(d,f)){continue}if(!(f in e)){return false}}return true};c.prototype._common_prefix=function(e,d){var f,g;g=Math.min(e.length,d.length);for(f=0;0<=g?f<g:f>g;0<=g?f++:f--){if(!this.equals(e[f],d[f])){return f}}return g};c.prototype._common_suffix=function(e,d){var f,j,h,g;j=e.length;h=d.length;g=Math.min(e.length,d.length);if(g===0){return 0}for(f=0;0<=g?f<g:f>g;0<=g?f++:f--){if(!this.equals(e[j-f-1],d[h-f-1])){return f}}return g};c.prototype.list_diff=function(m,l){var k,h,g,e,f,d,j;k={};g=m.length;e=l.length;d=this._common_prefix(m,l);j=this._common_suffix(m,l);m=m.slice(d,g-j);l=l.slice(d,e-j);g=m.length;e=l.length;f=Math.max(g,e);for(h=0;0<=f?h<=f:h>=f;0<=f?h++:h--){if(h<g&&h<e){if(!this.equals(m[h],l[h])){k[h+d]=this.diff(m[h],l[h])}}else{if(h<g){k[h+d]={o:"-"}}else{if(h<e){k[h+d]={o:"+",v:l[h]}}}}}return k};c.prototype.object_diff=function(e,d){var g,f;g={};if(!(e!=null)||!(d!=null)){return{}}for(f in e){if(!a.call(e,f)){continue}if(f in d){if(!this.equals(e[f],d[f])){g[f]=this.diff(e[f],d[f])}}else{g[f]={o:"-"}}}for(f in d){if(!a.call(d,f)){continue}if(!(f in e)){g[f]={o:"+",v:d[f]}}}return g};c.prototype.diff=function(f,e){var g,d;if(this.equals(f,e)){return{}}d=this.typeOf(f);if(d!==this.typeOf(e)){return{o:"r",v:e}}switch(d){case"boolean":return{o:"r",v:e};case"number":return{o:"I",v:e-f};case"array":return{o:"L",v:this.list_diff(f,e)};case"object":return{o:"O",v:this.object_diff(f,e)};case"string":g=c.dmp.diff_main(f,e);if(g.length>2){c.dmp.diff_cleanupEfficiency(g)}if(g.length>0){return{o:"d",v:c.dmp.diff_toDelta(g)}}}return{}};c.prototype.apply_list_diff=function(n,d){var m,l,o,p,h,g,v,i,q,u,r,k,e,t,j,f;q=this.deepCopy(n);g=[];m=[];for(v in d){if(!a.call(d,v)){continue}g.push(v);g.sort()}for(e=0,t=g.length;e<t;e++){h=g[e];i=d[h];r=[(function(){var x,s,w;w=[];for(x=0,s=m.length;x<s;x++){k=m[x];if(k<=h){w.push(k)}}return w})()].length;u=h-r;switch(i.o){case"+":[].splice.apply(q,[u,u-u+1].concat(j=i.v)),j;break;case"-":[].splice.apply(q,[u,u-u+1].concat(f=[])),f;break;case"r":q[u]=i.v;break;case"I":q[u]+=i.v;break;case"L":q[u]=this.apply_list_diff(q[u],i.v);break;case"O":q[u]=this.apply_object_diff(q[u],i.v);break;case"d":l=c.dmp.diff_fromDelta(q[u],i.v);o=c.dmp.patch_make(q[u],l);p=c.dmp.patch_apply(o,q[u]);q[u]=p[0]}}return q};c.prototype.apply_object_diff=function(h,j){var d,g,e,f,k,i;i=this.deepCopy(h);for(f in j){if(!a.call(j,f)){continue}k=j[f];switch(k.o){case"+":i[f]=k.v;break;case"-":delete i[f];break;case"r":i[f]=k.v;break;case"I":i[f]+=k.v;break;case"L":i[f]=this.apply_list_diff(i[f],k.v);break;case"O":i[f]=this.apply_object_diff(i[f],k.v);break;case"d":d=c.dmp.diff_fromDelta(i[f],k.v);g=c.dmp.patch_make(i[f],d);e=c.dmp.patch_apply(g,i[f]);i[f]=e[0]}}return i};c.prototype.transform_list_diff=function(m,f,p){var n,o,d,k,g,e,l,h,j,i;n={};d=[];o=[];for(g in f){if(!a.call(f,g)){continue}e=f[g];if(e.o==="+"){d.push(g)}if(e.o==="-"){o.push(g)}}for(g in m){if(!a.call(m,g)){continue}e=m[g];h=[(function(){var s,r,q;q=[];for(s=0,r=d.length;s<r;s++){i=d[s];if(i<=g){q.push(i)}}return q})()].length;l=[(function(){var s,r,q;q=[];for(s=0,r=o.length;s<r;s++){i=o[s];if(i<=g){q.push(i)}}return q})()].length;g=g+h-l;j=String(g);n[j]=e;if(g in f){if(e.o==="+"&&f.index.op==="+"){continue}else{if(e.o==="-"&&f.index.op==="-"){delete n[j]}else{k=this.transform_object_diff({sindex:e},{sindex:f.index.op},p);n[j]=k[j]}}}}return n};c.prototype.transform_object_diff=function(p,j,t){var e,g,q,l,i,m,n,d,r,k,o,f,h;q=this.deepCopy(p);for(o in p){if(!a.call(p,o)){continue}l=p[o];if(!(o in j)){continue}f=t[o];n=j[o];if(l.o==="+"&&n.o==="+"){if(this.equals(l.v,n.v)){delete q[o]}else{q[o]=this.diff(n.v,l.v)}}else{if(l.o==="-"&&n.o==="-"){delete q[o]}else{if(n.o==="-"&&((h=l.o)==="O"||h==="L"||h==="I"||h==="d")){q[o]={o:"+"};if(l.o==="O"){q[o].v=this.apply_object_diff(f,l.v)}else{if(l.o==="L"){q[o].v=this.apply_list_diff(f,l.v)}else{if(l.o==="I"){q[o].v=f+l.v}else{if(l.o==="d"){d=c.dmp.diff_fromDelta(f,l.v);r=c.dmp.patch_make(f,d);k=c.dmp.patch_apply(r,f);q[o].v=k[0]}}}}}else{if(l.o==="O"&&n.o==="O"){q[o]={o:"O",v:this.transform_object_diff(l.v,n.v,f)}}else{if(l.o==="L"&&n.o==="L"){q[o]={o:"O",v:this.transform_list_diff(l.v,n.v,f)}}else{if(l.o==="d"&&n.o==="d"){delete q[o];e=c.dmp.patch_make(f,c.dmp.diff_fromDelta(f,l.v));i=c.dmp.patch_make(f,c.dmp.diff_fromDelta(f,n.v));m=(c.dmp.patch_apply(i,f))[0];g=(c.dmp.patch_apply(e,m))[0];if(g!==m){d=c.dmp.diff_main(m,g);if(d.length>2){c.dmp.diff_cleanupEfficiency(d)}if(d.length>0){q[o]={o:"d",v:c.dmp.diff_toDelta(d)}}}}}}}}}return q}};return c})();window.jsondiff=b}).call(this);